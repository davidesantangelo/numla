<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Numla - Natural Language Calculator</title>
  </head>
  <body
    class="bg-zinc-50 text-zinc-900 dark:bg-black dark:text-gray-200 h-screen flex overflow-hidden font-mono antialiased selection:bg-zinc-200 selection:text-black dark:selection:bg-zinc-800 dark:selection:text-white"
  >
    <div id="app" class="flex w-full h-full relative">
      <!-- Spotlight Modal (Hidden by default) -->
      <div
        id="spotlight-overlay"
        class="fixed inset-0 backdrop-blur-sm z-50 hidden flex items-start justify-center pt-[20vh]"
      >
        <div
          class="w-full max-w-2xl bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 shadow-xl flex flex-col max-h-[60vh]"
        >
          <div
            class="p-4 border-b border-zinc-200 dark:border-zinc-900 flex items-center gap-3"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="text-zinc-400 dark:text-zinc-500"
            >
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input
              type="text"
              id="spotlight-input"
              placeholder="Search notes..."
              class="w-full bg-transparent border-none focus:outline-none text-lg text-zinc-900 dark:text-white placeholder-zinc-400 dark:placeholder-zinc-600"
              autocomplete="off"
            />
            <span
              class="text-xs text-zinc-400 dark:text-zinc-600 border border-zinc-200 dark:border-zinc-800 px-2 py-1"
              >ESC</span
            >
          </div>
          <div id="spotlight-list" class="overflow-y-auto p-2 space-y-1">
            <!-- Items injected here -->
          </div>
          <div
            class="p-2 border-t border-zinc-200 dark:border-zinc-900 text-xs text-zinc-500 dark:text-zinc-600 flex justify-between px-4 bg-zinc-50/50 dark:bg-zinc-950/50"
          >
            <span>Select to open</span>
            <div class="flex gap-3">
              <span><kbd class="font-sans">↑↓</kbd> Navigate</span>
              <span><kbd class="font-sans">↵</kbd> Open</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Top Bar removed - use Cmd+N for new note, Cmd+K for search -->

      <!-- Tab Bar -->
      <div class="fixed top-0 left-0 right-0 z-40 bg-zinc-100/90 dark:bg-zinc-900/90 backdrop-blur-md border-b border-zinc-200/50 dark:border-zinc-800/50">
        <div id="tab-bar" class="flex items-center h-10 px-2 overflow-x-auto no-scrollbar">
          <!-- Tabs injected here -->
        </div>
      </div>

      <!-- Main Editor -->
      <main
        id="main-content"
        class="flex-1 flex flex-col h-full pt-10 bg-zinc-50 dark:bg-black relative transition-all duration-300 ease-out"
      >

        <!-- Bottom Bar (Title + Date + Delete) -->
        <div
          id="bottom-bar"
          class="absolute bottom-10 md:bottom-6 left-1/2 -translate-x-1/2 flex items-center justify-center gap-3 px-4 py-2 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-md border border-zinc-200/50 dark:border-zinc-800/50 rounded-xl shadow-lg z-40 transition-all hover:bg-white/90 dark:hover:bg-zinc-900/90"
        >
          <span
            id="note-title-display"
            class="text-sm font-mono text-zinc-600 dark:text-zinc-400 truncate max-w-[120px] md:max-w-[180px]"
          >New Note</span>
          <div class="w-px h-4 bg-zinc-300 dark:bg-zinc-700"></div>
          <span
            id="timestamp-display"
            class="text-xs font-mono text-zinc-500 dark:text-zinc-500"
          >Dec 1, 2025 00:00:00</span>
          <div class="w-px h-4 bg-zinc-300 dark:bg-zinc-700"></div>
          <button
            id="export-btn"
            class="p-1 text-zinc-400 dark:text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 transition-colors"
            title="Export Note"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="14"
              height="14"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
          </button>
          <button
            id="delete-btn"
            class="p-1 text-zinc-400 dark:text-zinc-500 hover:text-red-500 transition-colors"
            title="Delete Note"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="14"
              height="14"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="3 6 5 6 21 6"></polyline>
              <path
                d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
              ></path>
            </svg>
          </button>
          <div class="w-px h-4 bg-zinc-300 dark:bg-zinc-700"></div>
          <!-- Theme Toggle Icon -->
          <button
            id="theme-toggle-btn"
            class="p-1 text-zinc-400 dark:text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 transition-colors"
            title="Toggle Theme"
          >
            <!-- Sun icon (shown in dark mode) -->
            <svg class="hidden dark:block" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="5"></circle>
              <line x1="12" y1="1" x2="12" y2="3"></line>
              <line x1="12" y1="21" x2="12" y2="23"></line>
              <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
              <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
              <line x1="1" y1="12" x2="3" y2="12"></line>
              <line x1="21" y1="12" x2="23" y2="12"></line>
              <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
              <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <!-- Moon icon (shown in light mode) -->
            <svg class="block dark:hidden" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
          </button>
        </div>
        <div class="flex-1 relative flex flex-row overflow-hidden mx-8 md:mx-16 lg:mx-24 my-6">
          <div
            class="flex-1 relative font-mono text-lg md:text-xl leading-relaxed"
          >
            <!-- Highlighter Backdrop -->
            <div
              id="highlighter"
              class="absolute inset-0 w-full h-full px-8 pt-16 pb-8 md:px-12 md:pt-20 md:pb-12 whitespace-pre-wrap break-words overflow-hidden pointer-events-none text-zinc-800 dark:text-gray-300 bg-transparent z-0"
              aria-hidden="true"
            ></div>

            <!-- Actual Editor -->
            <textarea
              id="note-editor"
              class="absolute inset-0 w-full h-full px-8 pt-16 pb-8 md:px-12 md:pt-20 md:pb-12 resize-none focus:outline-none text-transparent caret-zinc-900 dark:caret-white bg-transparent overflow-y-scroll no-scrollbar z-10"
              placeholder="Start typing your calculation...

Examples:
100 + 50
20% of 150
$100 in EUR
tax = 22%
price = 1000
price + tax"
              autofocus
            ></textarea>
          </div>
          <div class="w-[25%] md:w-[15%] relative">
            <div
              id="results-display"
              class="w-full h-full px-4 pt-16 pb-8 md:px-6 md:pt-20 md:pb-12 text-sm md:text-lg lg:text-xl leading-relaxed text-blue-600 dark:text-blue-400 font-mono text-right overflow-y-auto select-none pointer-events-none"
            >
              <!-- Results injected here -->
            </div>
          </div>
        </div>

        <!-- Floating Hint (hidden on mobile) -->
        <div
          class="hidden md:block absolute md:bottom-6 md:right-6 text-zinc-400 dark:text-zinc-600 text-xs pointer-events-none select-none whitespace-nowrap"
        >
          ⌘J new · ⌘K search
        </div>
        <!-- Delete Confirmation Modal -->
        <div
          id="delete-modal-overlay"
          class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] hidden opacity-0 transition-opacity duration-300"
        ></div>
        <div
          id="delete-modal"
          class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl p-6 shadow-2xl w-[90%] max-w-sm z-[70] hidden opacity-0 scale-95 transition-all duration-300 transform"
        >
          <h3 class="text-lg font-bold text-zinc-900 dark:text-white mb-2">Delete Note?</h3>
          <p class="text-zinc-600 dark:text-zinc-400 text-sm mb-6">
            This action cannot be undone. Are you sure you want to delete this
            note?
          </p>
          <div class="flex justify-end gap-3">
            <button
              id="cancel-delete-btn"
              class="px-4 py-2 text-sm font-medium text-zinc-400 hover:text-white transition-colors"
            >
              Cancel
            </button>
            <button
              id="confirm-delete-btn"
              class="px-4 py-2 text-sm font-medium bg-red-500/10 text-red-500 hover:bg-red-500/20 border border-red-500/20 rounded-lg transition-colors"
            >
              Delete
            </button>
          </div>
        </div>
      </main>
    </div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
