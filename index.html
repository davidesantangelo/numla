<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Numla - Smart Math Notes</title>
  </head>
  <body
    class="bg-zinc-50 text-zinc-900 dark:bg-black dark:text-gray-200 h-screen flex overflow-hidden font-mono antialiased selection:bg-zinc-200 selection:text-black dark:selection:bg-zinc-800 dark:selection:text-white"
  >
    <div id="app" class="flex w-full h-full relative">
      <!-- Spotlight Modal (Hidden by default) -->
      <div
        id="spotlight-overlay"
        class="fixed inset-0 backdrop-blur-sm z-50 hidden flex items-start justify-center pt-[20vh]"
      >
        <div
          class="w-full max-w-2xl bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 shadow-xl flex flex-col max-h-[60vh]"
        >
          <div
            class="p-4 border-b border-zinc-200 dark:border-zinc-900 flex items-center gap-3"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="text-zinc-400 dark:text-zinc-500"
            >
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input
              type="text"
              id="spotlight-input"
              placeholder="Search notes..."
              class="w-full bg-transparent border-none focus:outline-none text-lg text-zinc-900 dark:text-white placeholder-zinc-400 dark:placeholder-zinc-600"
              autocomplete="off"
            />
            <span
              class="text-xs text-zinc-400 dark:text-zinc-600 border border-zinc-200 dark:border-zinc-800 px-2 py-1"
              >ESC</span
            >
          </div>
          <div id="spotlight-list" class="overflow-y-auto p-2 space-y-1">
            <!-- Items injected here -->
          </div>
          <div
            class="p-2 border-t border-zinc-200 dark:border-zinc-900 text-xs text-zinc-500 dark:text-zinc-600 flex justify-between px-4 bg-zinc-50/50 dark:bg-zinc-950/50"
          >
            <span>Select to open</span>
            <div class="flex gap-3">
              <span><kbd class="font-sans">↑↓</kbd> Navigate</span>
              <span><kbd class="font-sans">↵</kbd> Open</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Top Bar removed - use Cmd+N for new note, Cmd+K for search -->

      <!-- Mobile Header & Menu Button -->
      <div class="fixed top-0 left-0 right-0 z-40 h-12 bg-zinc-50 dark:bg-black flex items-center px-4 md:hidden">
        <button id="menu-btn" class="p-3 -ml-2 text-zinc-600 dark:text-zinc-400">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="7" height="7"></rect>
            <rect x="14" y="3" width="7" height="7"></rect>
            <rect x="14" y="14" width="7" height="7"></rect>
            <rect x="3" y="14" width="7" height="7"></rect>
          </svg>
        </button>
      </div>

      <!-- Mobile Sidebar Overlay -->
      <div id="sidebar-overlay" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden opacity-0 transition-opacity duration-300 md:hidden"></div>

      <!-- Mobile Sidebar -->
      <div id="sidebar" class="fixed inset-y-0 left-0 w-64 bg-white dark:bg-zinc-950 border-r border-zinc-200 dark:border-zinc-800 z-50 transform -translate-x-full transition-transform duration-300 ease-in-out md:hidden flex flex-col">
        <div class="p-4 border-b border-zinc-200 dark:border-zinc-800 flex items-center justify-between">
          <span class="font-mono font-bold text-lg text-zinc-900 dark:text-white">Notes</span>
          <button id="sidebar-close-btn" class="p-3 text-zinc-500 hover:text-zinc-900 dark:hover:text-white">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        
        <div class="p-4 space-y-3">
            <button id="sidebar-new-btn" class="w-full py-2 px-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-lg font-mono text-sm font-bold flex items-center justify-center gap-2 hover:opacity-90 transition-opacity">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                New Note
            </button>
            <!-- Sidebar Search Input -->
            <div class="relative">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 dark:text-zinc-500">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <input
                    type="text"
                    id="sidebar-search-input"
                    placeholder="Search notes..."
                    class="w-full pl-10 pr-4 py-2 bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-sm font-mono text-zinc-900 dark:text-white placeholder-zinc-400 dark:placeholder-zinc-600 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all"
                    autocomplete="off"
                />
            </div>
        </div>

        <div id="sidebar-list" class="flex-1 overflow-y-auto p-2 space-y-1">
          <!-- Sidebar items injected here -->
        </div>
      </div>

      <!-- Tab Bar (Desktop only) -->
      <div class="hidden md:block fixed top-0 left-0 right-0 z-40 bg-zinc-50 dark:bg-black border-b border-zinc-200/50 dark:border-zinc-800/50">
        <div class="flex items-center h-14 px-8 md:px-16 lg:px-24">
          <!-- Tab Manager Button -->
          <button id="tab-manager-btn" class="flex-shrink-0 flex items-center justify-center w-8 h-8 mr-2 text-zinc-400 dark:text-zinc-600 hover:text-zinc-700 dark:hover:text-zinc-300 hover:bg-zinc-200/50 dark:hover:bg-zinc-800/30 rounded-lg transition-colors" title="Manage Tabs">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="7" height="7"></rect>
              <rect x="14" y="3" width="7" height="7"></rect>
              <rect x="14" y="14" width="7" height="7"></rect>
              <rect x="3" y="14" width="7" height="7"></rect>
            </svg>
          </button>
          <div id="tab-bar" class="flex-1 flex items-center h-14 overflow-x-auto no-scrollbar snap-x snap-mandatory scroll-smooth">
            <!-- Tabs injected here -->
          </div>
          <!-- Desktop Controls (right side of tab bar) -->
          <div class="flex items-center gap-1 ml-4 flex-shrink-0 px-3 h-9 bg-zinc-50 dark:bg-black border border-zinc-200/50 dark:border-zinc-700/50 rounded-lg">
            <span
              id="timestamp-display"
              class="text-xs font-mono text-zinc-700 dark:text-zinc-300 whitespace-nowrap mr-2"
            >Dec 1, 2025 00:00:00</span>
            <button
              id="export-btn"
              class="p-2 text-zinc-400 dark:text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 hover:bg-zinc-200/50 dark:hover:bg-zinc-800/30 rounded-lg transition-colors"
              title="Export Note"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
            </button>
            <button
              id="delete-btn"
              class="p-2 text-zinc-400 dark:text-zinc-500 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-colors"
              title="Delete Note"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <polyline points="3 6 5 6 21 6"></polyline>
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                ></path>
              </svg>
            </button>
            <button
              id="theme-toggle-btn"
              class="p-2 text-zinc-400 dark:text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 hover:bg-zinc-200/50 dark:hover:bg-zinc-800/30 rounded-lg transition-colors"
              title="Toggle Theme"
            >
              <!-- Sun icon (shown in dark mode) -->
              <svg class="hidden dark:block" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
              </svg>
              <!-- Moon icon (shown in light mode) -->
              <svg class="block dark:hidden" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
              </svg>
            </button>
            <button
              id="focus-mode-btn"
              class="p-2 text-zinc-400 dark:text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 hover:bg-zinc-200/50 dark:hover:bg-zinc-800/30 rounded-lg transition-colors"
              title="Focus Mode (Esc to exit)"
            >
              <!-- Focus/Expand icon -->
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M8 3H5a2 2 0 0 0-2 2v3"></path>
                <path d="M21 8V5a2 2 0 0 0-2-2h-3"></path>
                <path d="M3 16v3a2 2 0 0 0 2 2h3"></path>
                <path d="M16 21h3a2 2 0 0 0 2-2v-3"></path>
              </svg>
            </button>
          </div>
          <div class="flex items-center gap-1 ml-2 flex-shrink-0 px-2 h-9 bg-zinc-50 dark:bg-black border border-zinc-200/50 dark:border-zinc-700/50 rounded-lg">
            <a
              href="https://github.com/davidesantangelo/numla"
              target="_blank"
              rel="noopener noreferrer"
              class="p-2 text-zinc-400 dark:text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 hover:bg-zinc-200/50 dark:hover:bg-zinc-800/30 rounded-lg transition-colors"
              title="View on GitHub"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
              </svg>
            </a>
          </div>
        </div>
      </div>

      <!-- Desktop Tab Manager Sidebar Overlay -->
      <div id="tab-manager-overlay" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden opacity-0 transition-opacity duration-300"></div>

      <!-- Desktop Tab Manager Sidebar -->
      <div id="tab-manager-sidebar" class="fixed inset-y-0 left-0 w-80 bg-white dark:bg-zinc-950 border-r border-zinc-200 dark:border-zinc-800 z-50 transform -translate-x-full transition-transform duration-300 ease-in-out flex flex-col shadow-2xl">
        <div class="p-4 border-b border-zinc-200 dark:border-zinc-800 flex items-center justify-between">
          <span class="font-mono font-bold text-lg text-zinc-900 dark:text-white">All Notes</span>
          <button id="tab-manager-close-btn" class="p-1 text-zinc-500 hover:text-zinc-900 dark:hover:text-white">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        
        <!-- Tab Manager Search Input -->
        <div class="p-4 border-b border-zinc-200 dark:border-zinc-800">
          <div class="relative">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 dark:text-zinc-500">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input
              type="text"
              id="tab-manager-search-input"
              placeholder="Search notes..."
              class="w-full pl-10 pr-4 py-2 bg-zinc-100 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-sm font-mono text-zinc-900 dark:text-white placeholder-zinc-400 dark:placeholder-zinc-600 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all"
              autocomplete="off"
            />
          </div>
        </div>

        <div id="tab-manager-list" class="flex-1 overflow-y-auto p-2 space-y-1">
          <!-- Tab manager items injected here -->
        </div>

        <!-- Delete All Notes Button (moved to bottom) -->
        <div class="p-4 border-t border-zinc-200 dark:border-zinc-800">
          <button id="delete-all-notes-btn" class="w-full py-2 px-4 bg-red-500/10 text-red-500 hover:bg-red-500/20 border border-red-500/20 rounded-lg font-mono text-sm font-medium flex items-center justify-center gap-2 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="3 6 5 6 21 6"></polyline>
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            </svg>
            Delete All Notes
          </button>
        </div>
      </div>

      <!-- Delete All Notes Confirmation Modal -->
      <div id="close-all-modal-overlay" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] hidden opacity-0 transition-opacity duration-300"></div>
      <div id="close-all-modal" class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl p-6 shadow-2xl w-[90%] max-w-sm z-[70] hidden opacity-0 scale-95 transition-all duration-300 transform">
        <h3 class="text-lg font-bold text-zinc-900 dark:text-white mb-2">Delete All Notes?</h3>
        <p class="text-zinc-600 dark:text-zinc-400 text-sm mb-6">
          This action cannot be undone. All your notes will be permanently deleted.
        </p>
        <div class="flex justify-end gap-3">
          <button id="cancel-close-all-btn" class="px-4 py-2 text-sm font-medium text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors">
            Cancel
          </button>
          <button id="confirm-close-all-btn" class="px-4 py-2 text-sm font-medium bg-red-500/10 text-red-500 hover:bg-red-500/20 border border-red-500/20 rounded-lg transition-colors">
            Delete All
          </button>
        </div>
      </div>

      <!-- Main Editor -->
      <main
        id="main-content"
        class="flex-1 flex flex-col h-full pt-14 pb-16 md:pb-0 bg-zinc-50 dark:bg-black relative transition-all duration-300 ease-out"
      >

        <!-- Mobile Bottom Bar (fixed to bottom, only visible on mobile) -->
        <div
          id="mobile-bottom-bar"
          class="md:hidden fixed bottom-0 left-0 right-0 flex items-center justify-between px-4 py-2 bg-white/95 dark:bg-zinc-900/95 backdrop-blur-md border-t border-zinc-200/50 dark:border-zinc-800/50 z-40"
        >
          <!-- Left side: Note title -->
          <div class="flex items-center gap-2 overflow-hidden flex-1 min-w-0">
            <span
              id="note-title-display"
              class="text-sm font-mono text-zinc-600 dark:text-zinc-400 truncate"
            >New Note</span>
            <span
              id="timestamp-display-mobile"
              class="text-[10px] font-mono text-zinc-400 dark:text-zinc-600 whitespace-nowrap"
            ></span>
          </div>
          
          <!-- Right side: Controls -->
          <div class="flex items-center gap-1 flex-shrink-0">
            <button
              id="export-btn-mobile"
              class="p-2 text-zinc-400 dark:text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 active:bg-zinc-100 dark:active:bg-zinc-800 rounded-lg transition-colors"
              title="Export Note"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
            </button>
            <button
              id="delete-btn-mobile"
              class="p-2 text-zinc-400 dark:text-zinc-500 hover:text-red-500 active:bg-red-500/10 rounded-lg transition-colors"
              title="Delete Note"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <polyline points="3 6 5 6 21 6"></polyline>
                <path
                  d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                ></path>
              </svg>
            </button>
            <button
              id="theme-toggle-btn-mobile"
              class="p-2 text-zinc-400 dark:text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 active:bg-zinc-100 dark:active:bg-zinc-800 rounded-lg transition-colors"
              title="Toggle Theme"
            >
              <!-- Sun icon (shown in dark mode) -->
              <svg class="hidden dark:block" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
              </svg>
              <!-- Moon icon (shown in light mode) -->
              <svg class="block dark:hidden" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
              </svg>
            </button>
            <button
              id="focus-mode-btn-mobile"
              class="p-2 text-zinc-400 dark:text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 active:bg-zinc-100 dark:active:bg-zinc-800 rounded-lg transition-colors"
              title="Focus Mode"
            >
              <!-- Focus/Expand icon -->
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M8 3H5a2 2 0 0 0-2 2v3"></path>
                <path d="M21 8V5a2 2 0 0 0-2-2h-3"></path>
                <path d="M3 16v3a2 2 0 0 0 2 2h3"></path>
                <path d="M16 21h3a2 2 0 0 0 2-2v-3"></path>
              </svg>
            </button>
          </div>
        </div>
        <div class="flex-1 relative flex flex-row overflow-hidden my-6">
          <div
            class="flex-1 relative font-mono text-lg md:text-xl leading-relaxed"
          >
            <!-- Highlighter Backdrop -->
            <div
              id="highlighter"
              class="absolute inset-0 w-full h-full pl-4 pr-4 pt-4 pb-8 md:pl-16 md:pr-16 md:pt-6 md:pb-12 lg:pl-24 lg:pr-24 whitespace-pre-wrap break-words overflow-hidden pointer-events-none text-zinc-800 dark:text-gray-300 bg-transparent z-0"
              aria-hidden="true"
            ></div>

            <!-- Actual Editor -->
            <textarea
              id="note-editor"
              class="absolute inset-0 w-full h-full pl-4 pr-4 pt-4 pb-8 md:pl-16 md:pr-16 md:pt-6 md:pb-12 lg:pl-24 lg:pr-24 resize-none focus:outline-none text-transparent caret-zinc-900 dark:caret-white bg-transparent overflow-y-scroll no-scrollbar z-10"
              placeholder="Start typing your calculation...

Examples:
100 + 50
20% of 150
$100 in EUR
tax = 22%
price = 1000
price + tax"
              autofocus
            ></textarea>
          </div>
          <div class="w-[35%] md:w-[18%] lg:w-[15%] relative overflow-hidden">
            <div
              id="results-display"
              class="w-full h-full pl-2 pr-2 pt-4 pb-8 md:pl-4 md:pr-16 md:pt-6 md:pb-12 lg:pr-24 text-xs md:text-sm lg:text-base leading-relaxed text-blue-600 dark:text-blue-400 font-mono text-right overflow-y-auto overflow-x-hidden select-none whitespace-nowrap"
            >
              <!-- Results injected here -->
            </div>
          </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div
          id="delete-modal-overlay"
          class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] hidden opacity-0 transition-opacity duration-300"
        ></div>

        <!-- Focus Mode Exit Hint -->
        <div class="focus-mode-hint">Press ESC to exit focus mode</div>
        <div
          id="delete-modal"
          class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-2xl p-6 shadow-2xl w-[90%] max-w-sm z-[70] hidden opacity-0 scale-95 transition-all duration-300 transform"
        >
          <h3 class="text-lg font-bold text-zinc-900 dark:text-white mb-2">Delete Note?</h3>
          <p class="text-zinc-600 dark:text-zinc-400 text-sm mb-6">
            This action cannot be undone. Are you sure you want to delete this
            note?
          </p>
          <div class="flex justify-end gap-3">
            <button
              id="cancel-delete-btn"
              class="px-4 py-2 text-sm font-medium text-zinc-400 hover:text-white transition-colors"
            >
              Cancel
            </button>
            <button
              id="confirm-delete-btn"
              class="px-4 py-2 text-sm font-medium bg-red-500/10 text-red-500 hover:bg-red-500/20 border border-red-500/20 rounded-lg transition-colors"
            >
              Delete
            </button>
          </div>
        </div>
      </main>
    </div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
